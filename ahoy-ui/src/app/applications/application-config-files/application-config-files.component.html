<!--
  ~ Copyright  2021 LSD Information Technology (Pty) Ltd
  ~
  ~    Licensed under the Apache License, Version 2.0 (the "License");
  ~    you may not use this file except in compliance with the License.
  ~    You may obtain a copy of the License at
  ~
  ~        http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~    Unless required by applicable law or agreed to in writing, software
  ~    distributed under the License is distributed on an "AS IS" BASIS,
  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~    See the License for the specific language governing permissions and
  ~    limitations under the License.
  -->

<div class="p-fluid">
  <div class="p-col-12 p-md-5">
    <div class="p-field p-float-label">
      <input pInputText id="applicationConfigPath" [(ngModel)]="applicationVersion.configPath" name="applicationConfigPath"
             required="{{configs.length > 0}}"
             [disabled]="!editPath">
      <label for="applicationConfigPath">Path</label>
      <small *ngIf="!editPath">Application configuration file path; required for environment configuration file</small>
    </div>

    <button pButton pRipple icon="pi pi-plus" class="p-button-rounded p-button-plain p-mr-2" (click)="addConfig()"></button>
    <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deleteConfig()"></button>
  </div>

  <div *ngIf="configs && configs.length > 0" class="p-col-12">
    <p-tabView orientation="left" [(activeIndex)]="selectedConfigIndex">
      <p-tabPanel [header]="config.name ? config.name : '<new>'"
                  *ngFor="let config of configs; let configIndex = index" [selected]="configIndex == 0">

        <div class="p-fluid p-col-12 p-md-5">
          <div class="p-field p-float-label">
            <input pInputText id="applicationConfigName{{configIndex}}" [(ngModel)]="config.name" name="applicationConfigName{{configIndex}}"
                   required>
            <label for="applicationConfigName{{configIndex}}">Name</label>
          </div>

          <div class="p-field p-float-label">
                            <textarea rows="20" cols="60" pInputTextarea id="applicationConfig{{configIndex}}" [(ngModel)]="config.config" name="applicationConfig{{configIndex}}"
                                      required></textarea>
            <label for="applicationConfig{{configIndex}}">Config</label>
          </div>
        </div>

      </p-tabPanel>
    </p-tabView>
  </div>
</div>
