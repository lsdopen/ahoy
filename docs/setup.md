## Login

Ahoy makes use of [Keycloak](https://www.keycloak.org/) for authentication and authorisation.

Use the default admin user credentials to log in for the first time:
```text
Username: admin
Password: admin
```
Note: on first login you'll be required to update the password for the default ahoy user.

Please refer to [Users and Roles](./users_roles.md) for other users available.

## Setup

Ahoy makes use of Git, ArgoCD and Sealed Secrets to manage releases to clusters.
These need to be installed and setup before you'll be able to manage releases.

Once installed, configure their settings from the Ahoy UI on the Settings page.

### Git

Configure Ahoy to use your own git repository by entering the repository and authentication details.
An initial commit is required for the repository to be used.

For SSH authentication, please note to generate the key pair using the PEM format:
```shell
ssh-keygen -t rsa -m PEM
```

Some default known hosts will be added for you, but if you're using your own git repository,
add SSH known host for your repository:
```shell
ssh-keyscan -t rsa <your repo: example github.com>
```

Add the output to the SSH Known Hosts field, for example for github:
```text
github.com ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq2A7hRGmdnm9tUDbO9IDSwBK6TbQa+PXYPCPy6rbTrTtw7PHkccKrpp0yVhp5HdEIcKr6pLlVDBfOLX9QUsyCOV0wzfjIJNlGEYsdlLJizHhbn2mUjvSAHQqZETYP81eFzLQNnPHt4EVVUh7VfDESU84KezmD5QlWpXLmvU31/yMf+Se8xhHTvKSCZIFImWwoG6mbUoWf9nzpIoaSjB+weqqUUmpaaasXVal72J+UX2B+2RPW3RcT0eOzQgqlJL3RKrTJvdsjE3JEAvGq3lGHSZXy28G3skua2SmVi/w4yCE6gbODqnTWlg7+wC604ydGXA8VJiS5ap43JXiUFFAaQ==
```

### ArgoCD

The initial password is autogenerated and stored in a secret called argocd-initial-admin-secret. This can be retrieved for example, with the command:
```shell
kubectl -n ahoy get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
```

Using the username admin and the password from above, login to Argo CD's IP or hostname:
```shell
argocd login <ARGOCD_SERVER>
```

Change the password using the command:
```shell
argocd account update-password
```

Generate token for ahoy account:
```shell
argocd account generate-token --account ahoy
```

Enter ArgoCD server (this may be something like https://ahoy-argocd-server.ahoy.svc:443/)

Enter the token generated above.

### Docker Registries

Add any private docker registries where your application images may reside.
